# Apache configuration for DazzleStore frontend
<Directory "/var/www/html/dazzle-store">
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted

    # Enable .htaccess and rewrite rules
    RewriteEngine On
    
    # If the request is not for a file or directory
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # Rewrite all requests to index.html for client-side routing
    RewriteRule ^ index.html [QSA,L]
</Directory>

<VirtualHost *:80>
    ServerName dazzle-store.local
    DocumentRoot "/var/www/html/dazzle-store"
    
    # Enable CORS for API requests
    Header set Access-Control-Allow-Origin "http://localhost:3001"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
    
    ErrorLog ${APACHE_LOG_DIR}/dazzle-store-error.log
    CustomLog ${APACHE_LOG_DIR}/dazzle-store-access.log combined
</VirtualHost>